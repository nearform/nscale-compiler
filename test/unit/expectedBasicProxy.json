{
  "name": "sudc",
  "namespace": "sudc",
  "id": "e7bb3963-fd16-4b1b-ae9f-5fa16e2d192d",
  "containerDefinitions": [
    {
      "type": "aws-elb",
      "specific": {
        "protocol": "HTTP",
        "loadBalancerPort": 80,
        "instanceProtocol": "HTTP",
        "instancePort": 8000
      },
      "id": "webElb",
      "name": "webElb"
    },
    {
      "type": "aws-sg",
      "specific": {
        "ingress": [
          {
            "ipProtocol": "tcp",
            "fromPort": 22,
            "toPort": 22,
            "ipRanges": [
              {
                "cidrIp": "0.0.0.0/0"
              }
            ]
          },
          {
            "ipProtocol": "tcp",
            "fromPort": 3000,
            "toPort": 3000,
            "ipRanges": [
              {
                "cidrIp": "0.0.0.0/0"
              }
            ]
          }
        ],
        "egress": []
      },
      "id": "webSg",
      "name": "webSg"
    },
    {
      "type": "aws-ami",
      "id": "machine",
      "name": "machine"
    },
    {
      "type": "docker",
      "specific": {
        "repositoryUrl": "git@github.com:pelger/startupdeathclock.git",
        "buildScript": "builddoc.sh",
        "execute": {
          "args": "-p 9002:9002",
          "exec": "/usr/bin/node /srv/doc-srv"
        }
      },
      "id": "docsrv",
      "name": "docsrv"
    },
    {
      "type": "docker",
      "specific": {
        "repositoryUrl": "git@github.com:pelger/startupdeathclock.git",
        "buildScript": "buildhist.sh",
        "execute": {
          "args": "-p 9000:9000",
          "exec": "/usr/bin/node /srv/hist-srv"
        }
      },
      "id": "histsrv",
      "name": "histsrv"
    },
    {
      "type": "docker",
      "specific": {
        "repositoryUrl": "git@github.com:pelger/startupdeathclock.git",
        "buildScript": "buildreal.sh",
        "execute": {
          "args": "-p 9001:9001",
          "exec": "/usr/bin/node /srv/real-srv"
        }
      },
      "id": "realsrv",
      "name": "realsrv"
    },
    {
      "type": "docker",
      "specific": {
        "repositoryUrl": "git@github.com:pelger/startupdeathclock.git",
        "buildScript": "buildweb.sh",
        "execute": {
          "args": "-e WEB_HOST=10.75.29.243 -p 8000:8000",
          "exec": "sh /web/run.sh"
        }
      },
      "id": "web",
      "name": "web"
    },
    {
      "type": "docker",
      "specific": {
        "args": "-d --appendonly -p 6379:6379",
        "name": "redis"
      },
      "id": "redis",
      "name": "redis"
    },
    {
      "type": "docker",
      "specific": {
        "repositoryUrl": "https://github.com/nearform/nscale-proxy-container.git",
        "configPath": "/etc/haproxy.cfg",
        "hup": "haproxy -f /etc/haproxy.cfg -p /var/run/haproxy.pid -sf $(cat /var/run/haproxy.pid)",
        "execute": {
          "args": "--net=host -d"
        }
      },
      "id": "__proxy",
      "name": "__proxy"
    }
  ],
  "topology": {
    "containers": {
      "webElb-a9d0fd87": {
        "id": "webElb-a9d0fd87",
        "containedBy": "webElb-a9d0fd87",
        "containerDefinitionId": "webElb",
        "type": "aws-elb",
        "contains": [
          "webSg-6eb120b1"
        ],
        "specific": {
          "protocol": "HTTP",
          "loadBalancerPort": 80,
          "instanceProtocol": "HTTP",
          "instancePort": 8000
        }
      },
      "webSg-6eb120b1": {
        "id": "webSg-6eb120b1",
        "containedBy": "webElb-a9d0fd87",
        "containerDefinitionId": "webSg",
        "type": "aws-sg",
        "contains": [
          "machine-9c7abf3c",
          "machine-8b01ab7f"
        ],
        "specific": {
          "ingress": [
            {
              "ipProtocol": "tcp",
              "fromPort": 22,
              "toPort": 22,
              "ipRanges": [
                {
                  "cidrIp": "0.0.0.0/0"
                }
              ]
            },
            {
              "ipProtocol": "tcp",
              "fromPort": 3000,
              "toPort": 3000,
              "ipRanges": [
                {
                  "cidrIp": "0.0.0.0/0"
                }
              ]
            }
          ],
          "egress": []
        }
      },
      "machine-9c7abf3c": {
        "id": "machine-9c7abf3c",
        "containedBy": "webSg-6eb120b1",
        "containerDefinitionId": "machine",
        "type": "aws-ami",
        "contains": [
          "web-761c0265",
          "__proxy-11b32f3"
        ],
        "specific": {}
      },
      "web-761c0265": {
        "id": "web-761c0265",
        "containedBy": "machine-9c7abf3c",
        "containerDefinitionId": "web",
        "type": "docker",
        "contains": [],
        "specific": {
          "repositoryUrl": "git@github.com:pelger/startupdeathclock.git",
          "buildScript": "buildweb.sh",
          "execute": {
            "args": "-e WEB_HOST=10.75.29.243 -p 8000:8000",
            "exec": "sh /web/run.sh"
          }
        }
      },
      "__proxy-11b32f3": {
        "id": "__proxy-11b32f3",
        "containedBy": "machine-9c7abf3c",
        "containerDefinitionId": "__proxy",
        "type": "docker",
        "contains": [],
        "specific": {
          "repositoryUrl": "https://github.com/nearform/nscale-proxy-container.git",
          "configPath": "/etc/haproxy.cfg",
          "hup": "haproxy -f /etc/haproxy.cfg -p /var/run/haproxy.pid -sf $(cat /var/run/haproxy.pid)",
          "execute": {
            "args": "--net=host -d"
          }
        }
      },
      "machine-8b01ab7f": {
        "id": "machine-8b01ab7f",
        "containedBy": "webSg-6eb120b1",
        "containerDefinitionId": "machine",
        "type": "aws-ami",
        "contains": [
          "docsrv-b792dda5",
          "histsrv-c095ed33",
          "realsrv-599cbc89",
          "__proxy-2e9b8c1f"
        ],
        "specific": {}
      },
      "docsrv-b792dda5": {
        "id": "docsrv-b792dda5",
        "containedBy": "machine-8b01ab7f",
        "containerDefinitionId": "docsrv",
        "type": "docker",
        "contains": [],
        "specific": {
          "repositoryUrl": "git@github.com:pelger/startupdeathclock.git",
          "buildScript": "builddoc.sh",
          "execute": {
            "args": "-p 9002:9002",
            "exec": "/usr/bin/node /srv/doc-srv"
          }
        }
      },
      "histsrv-c095ed33": {
        "id": "histsrv-c095ed33",
        "containedBy": "machine-8b01ab7f",
        "containerDefinitionId": "histsrv",
        "type": "docker",
        "contains": [],
        "specific": {
          "repositoryUrl": "git@github.com:pelger/startupdeathclock.git",
          "buildScript": "buildhist.sh",
          "execute": {
            "args": "-p 9000:9000",
            "exec": "/usr/bin/node /srv/hist-srv"
          }
        }
      },
      "realsrv-599cbc89": {
        "id": "realsrv-599cbc89",
        "containedBy": "machine-8b01ab7f",
        "containerDefinitionId": "realsrv",
        "type": "docker",
        "contains": [],
        "specific": {
          "repositoryUrl": "git@github.com:pelger/startupdeathclock.git",
          "buildScript": "buildreal.sh",
          "execute": {
            "args": "-p 9001:9001",
            "exec": "/usr/bin/node /srv/real-srv"
          }
        }
      },
      "__proxy-2e9b8c1f": {
        "id": "__proxy-2e9b8c1f",
        "containedBy": "machine-8b01ab7f",
        "containerDefinitionId": "__proxy",
        "type": "docker",
        "contains": [],
        "specific": {
          "repositoryUrl": "https://github.com/nearform/nscale-proxy-container.git",
          "configPath": "/etc/haproxy.cfg",
          "hup": "haproxy -f /etc/haproxy.cfg -p /var/run/haproxy.pid -sf $(cat /var/run/haproxy.pid)",
          "execute": {
            "args": "--net=host -d"
          }
        }
      },
      "machine-1d6ee06": {
        "id": "machine-1d6ee06",
        "containedBy": "machine-1d6ee06",
        "containerDefinitionId": "machine",
        "type": "aws-ami",
        "contains": [
          "redis-4fd920d2",
          "__proxy-38de1044"
        ],
        "specific": {}
      },
      "redis-4fd920d2": {
        "id": "redis-4fd920d2",
        "containedBy": "machine-1d6ee06",
        "containerDefinitionId": "redis",
        "type": "docker",
        "contains": [],
        "specific": {
          "args": "-d --appendonly -p 6379:6379",
          "name": "redis"
        }
      },
      "__proxy-38de1044": {
        "id": "__proxy-38de1044",
        "containedBy": "machine-1d6ee06",
        "containerDefinitionId": "__proxy",
        "type": "docker",
        "contains": [],
        "specific": {
          "repositoryUrl": "https://github.com/nearform/nscale-proxy-container.git",
          "configPath": "/etc/haproxy.cfg",
          "hup": "haproxy -f /etc/haproxy.cfg -p /var/run/haproxy.pid -sf $(cat /var/run/haproxy.pid)",
          "execute": {
            "args": "--net=host -d"
          }
        }
      }
    },
    "name": "aws"
  }
}

